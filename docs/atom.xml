<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-cn"><title type="text">冷夜枫寒</title><subtitle type="html">冷夜枫寒，一个分享软件、知识的地方。</subtitle><updated>2022-10-26T12:22:34+08:00</updated><id>https://lengyefenghan.top/</id><link rel="alternate" type="text/html" href="https://lengyefenghan.top/"/><link rel="self" type="application/atom+xml" href="https://lengyefenghan.top/atom.xml"/><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><generator uri="https://gohugo.io/" version="0.104.3">Hugo</generator><entry><title type="text">搭建ariang并开启和websockets安全并且为aria2开启ipv6访问</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2022-07-04-1/"/><id>https://lengyefenghan.top/blogs/2022-07-04-1/</id><updated>2022-10-26T11:21:52+08:00</updated><published>2022-07-04T11:50:04+08:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">安装aria2 1. 需要安装好aria2不在描述，可以看我其他文章 2. 修改配置文件开启we……</summary><content type="html">&lt;h2 id="安装aria2">安装aria2&lt;/h2>
&lt;h2 id="1-需要安装好aria2不在描述可以看我其他文章">1. 需要安装好aria2不在描述，可以看我其他文章&lt;/h2>
&lt;h2 id="2-修改配置文件开启websockets安全-可选非必需项目">2. 修改配置文件开启websockets(安全) 可选非必需项目&lt;/h2>
&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf">#是否启用RPC服务的SSL/TLS加密
rpc-secure=true
#申请的域名crt证书文件路径，自行修改
rpc-certificate=/path/cert.crt
##申请的域名key证书文件路径，自行修改
rpc-private-key=/path/cert.key
&lt;/code>&lt;/pre>&lt;p>使用时需要在ariang填写域名密钥，而不能直接使用ip访问&lt;/p>
&lt;h2 id="3-ipv6支持nginx反向代理">3. ipv6支持(nginx反向代理)&lt;/h2>
&lt;p>考虑到很多人是内网ipv4公网ipv6，都是通过远程访问，这里给出了通过ngixn来支持ipv6访问的方式
nginx添加分流规则&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf">stream {
map $ssl_preread_server_name $backend_name {
# 这里就是 SNI 识别，将域名映射成一个配置名
ariang.xxx ariang;
aria2.xxx aria2;
# 域名都不匹配情况下的默认值
default ariang;
}
#配置分流的单独文件
upstream ariang{
server 127.0.0.1:8443;
}
upstream aria2{
server 127.0.0.1:6800;
}
# 监听 443 并开启 ssl_preread
server {
listen 443 reuseport;
listen [::]:443 reuseport;
proxy_pass $backend_name;
ssl_preread on;
}
}
&lt;/code>&lt;/pre>&lt;p>根据上面的配置文件，我们在设置dns解析时需要添加一条解析规则指向aria2的ip由于根据443端口分流，所以不影响cdn是否开启,但是根据这么设置的话需要在aria2ng里面填写端口为443&lt;/p>
&lt;h1 id="ariang">ariang&lt;/h1>
&lt;ol>
&lt;li>前往&lt;a href="http://ariang.mayswind.net/">ariang官网&lt;/a>下载最新版本，并且安装完成&lt;/li>
&lt;li>添加http基础验证
a. 修改nginx配置文件&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code>server {
listen 80;
listen [::]:80;
server_name ariang.xxx;
# # Enforce HTTPS
return 301 https://$server_name$request_uri;
}
server {
listen 8443 ssl http2;
listen [::]:8443 ssl http2;
server_name ariang.xxx;
# Path to the root of your installation
root /usr/share/webapps/aria2ng;
ssl_certificate cert.pem;
ssl_certificate_key key.pem;
location / {
index index.html;
}
}
&lt;/code>&lt;/pre>&lt;p>c. 重启测试&lt;/p></content><category scheme="https://lengyefenghan.top/tags/linux/" term="linux" label="linux"/><category scheme="https://lengyefenghan.top/tags/nginx/" term="nginx" label="nginx"/><category scheme="https://lengyefenghan.top/tags/ipv6/" term="ipv6" label="ipv6"/><category scheme="https://lengyefenghan.top/tags/aria2nga/" term="aria2nga" label="aria2nga"/><category scheme="https://lengyefenghan.top/tags/ria2/" term="ria2" label="ria2"/></entry><entry><title type="text">Nextcloud添加aria2下载功能</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2022-05-31/"/><id>https://lengyefenghan.top/blogs/2022-05-31/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2022-05-31T09:01:06+08:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">安装aria2 1 yay -S aria2-systemd aria2 修改配置文件 下载配置文件模板 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16……</summary><content type="html">&lt;h2 id="安装aria2">安装aria2&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">yay -S aria2-systemd aria2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="修改配置文件">修改配置文件&lt;/h2>
&lt;ol>
&lt;li>下载配置文件模板&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#/etc/aria2/aria2.conf.example&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 下载位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dir&lt;/span>&lt;span class="o">=&lt;/span>/mnt/data/Downloads/aria2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## RPC相关设置 ##&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 启用RPC, 默认:false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enable-rpc&lt;span class="o">=&lt;/span>&lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 允许所有来源, 默认:false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rpc-allow-origin-all&lt;span class="o">=&lt;/span>&lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 允许非外部访问, 默认:false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 如果不需要外部访问可以关闭提升安全性&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rpc-listen-all&lt;span class="o">=&lt;/span>&lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 事件轮询方式, 取值:[epoll, kqueue, port, poll, select], 不同系统默认值不同&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">event-poll&lt;span class="o">=&lt;/span>epoll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 设置的RPC授权令牌, v1.18.4新增功能, 取代 --rpc-user 和 --rpc-passwd 选项&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#rpc-secret=&amp;lt;TOKEN&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rpc-secret&lt;span class="o">=&lt;/span>你自己的token
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 文件预分配方式, 能有效降低磁盘碎片, 默认:prealloc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">file-allocation&lt;span class="o">=&lt;/span>trunc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#会话保存位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">input-file&lt;span class="o">=&lt;/span>/mnt/data/aria2/session.lock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">save-session&lt;span class="o">=&lt;/span>/mnt/data/aria2/session.lock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>修改守护进程&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#/etc/aria2/start-daemon.sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dir&lt;/span>&lt;span class="o">=&lt;/span>/mnt/data/aria2&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>修改服务脚本&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#/etc/aria2/start-server.sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dir&lt;/span>&lt;span class="o">=&lt;/span>/mnt/data/aria2&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="创建aria2-session目录并且修改下载文件保存位置权限">创建aria2 session目录并且修改下载文件保存位置权限&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mkdir -p /mnt/data/aria2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R nextcloud:nextcloud /mnt/data/aria2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R nextcloud:nextcloud /mnt/data/Downloads/aria2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="以nextcloud用户身份启动aria2">以nextcloud用户身份启动aria2&lt;/h2>
&lt;ol>
&lt;li>修改运行时用户身份和用户组,添加或修改以下内容&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#/usr/lib/systemd/system/aria2.service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>service&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">User&lt;/span>&lt;span class="o">=&lt;/span>nextcloud
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Group&lt;/span>&lt;span class="o">=&lt;/span>nextcloud
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>运行aria2&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">systemctl start aria2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> aria2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="nextcloud配置">nextcloud配置&lt;/h1>
&lt;ol>
&lt;li>添加并启用插件扩展存储
”External storage support“&lt;/li>
&lt;li>在插件扩展存储中添加下载目录&lt;/li>
&lt;li>添加扩展 下载最新版 &lt;a href="https://github.com/e-alfred/ocdownloader/releases">https://github.com/e-alfred/ocdownloader/releases&lt;/a> 然后解压到 /var/lib/nextcloud/apps 并且设置用户和组都为nextcloud&lt;/li>
&lt;li>应用中启用ocdownloader&lt;/li>
&lt;li>在设置 管理 其他设置ocdownloader 填入aria2的配置&lt;/li>
&lt;/ol>
&lt;!-- 引入评论功能 -->
&lt;div id="SOHUCS" style="width: 80%;display:block;height:auto;">&lt;/div>
&lt;script type="text/javascript">
(function(){
var appid = 'cyw8JY6N5';
var conf = 'prod_e3b09f470b09f642bb0bd4b1d9479c42';
var width = window.innerWidth || document.documentElement.clientWidth;
if (width &lt; 1000) {
var head = document.getElementsByTagName('head')[0]||document.head||document.documentElement;
var script = document.createElement('script');
script.type = 'text/javascript';
script.charset = 'utf-8';
script.id = 'changyan_mobile_js';
script.src = 'https://cy-cdn.kuaizhan.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&amp;conf=' + conf;
head.appendChild(script);
} else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://cy-cdn.kuaizhan.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); &lt;/script></content><category scheme="https://lengyefenghan.top/categories/nextcloud/" term="Nextcloud" label="Nextcloud"/><category scheme="https://lengyefenghan.top/tags/linux/" term="linux" label="linux"/><category scheme="https://lengyefenghan.top/tags/nextcloud/" term="nextcloud" label="nextcloud"/><category scheme="https://lengyefenghan.top/tags/aria2/" term="aria2" label="aria2"/></entry><entry><title type="text">Nextcloud踩坑记</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2022-05-29/"/><id>https://lengyefenghan.top/blogs/2022-05-29/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2022-05-29T07:47:39+08:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">Windows下无法同步文件夹 文件夹大小写区分问题 在windows下默认文件夹不区分……</summary><content type="html">&lt;h2 id="windows下无法同步文件夹">Windows下无法同步文件夹&lt;/h2>
&lt;ol>
&lt;li>文件夹大小写区分问题
在windows下默认文件夹不区分大小写，也就是&amp;quot;test&amp;quot;和&amp;quot;TEST&amp;quot;是同一个文件夹，如果想要同步文件夹，需要设置文件夹大小写区分&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># 查询文件夹大小写区分&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fsutils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">exe&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">queryCaseSensitiveInfo&lt;/span> &lt;span class="n">PATH&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># 设置区分大小写&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fsutils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">exe&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">setCaseSensitiveInfo&lt;/span> &lt;span class="n">PATH&lt;/span> &lt;span class="n">enable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># 设置不区分文件大小写&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fsutils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">exe&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">setCaseSensitiveInfo&lt;/span> &lt;span class="n">PATH&lt;/span> &lt;span class="n">disable&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;font color="red">注意:此处设置的路径并不会传递到下一级目录，也就是'D:\Nextcloud'目录被设置为区分大小写，但是'D\Nextcloud\Downloads'目录下又不会区分大小写，所以需要设置'D:\Nextcloud\Downloads'时路径必须是他，而不是上一级目录&lt;/font>&lt;/p>
&lt;h2 id="更新后提示权限错误或者无法启动">更新后提示权限错误或者无法启动&lt;/h2>
&lt;ol>
&lt;li>查看nginx运行日志,此处网页错误id IBdcJOfunqHjhcnOBr9S&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">systemctl status nginx.service &lt;span class="p">|&lt;/span> grep IBdcJOfunqHjhcnOBr9S
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Jun &lt;span class="m">24&lt;/span> 08:58:25 cloud.lengyefenghan.top nginx&lt;span class="o">[&lt;/span>2911&lt;span class="o">]&lt;/span>: 2022/06/24 08:58:25 &lt;span class="o">[&lt;/span>error&lt;span class="o">]&lt;/span> 2911#2911: *3 FastCGI sent in stderr: &lt;span class="s2">&amp;#34;PHP message: {&amp;#34;&lt;/span>reqId&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>IBdcJOfunqHjhcnOBr9S&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>level&lt;span class="s2">&amp;#34;:3,&amp;#34;&lt;/span>time&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>2022-06-24T00:58:25+00:00&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>remoteAddr&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>127.0.0.1&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>user&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>--&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>app&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>PHP&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>method&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>GET&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>url&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>/&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>message&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>touch&lt;span class="o">()&lt;/span>: Unable to create file /usr/share/webapps/nextcloud/config/config.php because Permission denied at /usr/share/webapps/nextcloud/lib/private/Config.php#263&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>userAgent&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>Mozilla/5.0 &lt;span class="o">(&lt;/span>Windows NT 10.0&lt;span class="p">;&lt;/span> Win64&lt;span class="p">;&lt;/span> x64&lt;span class="o">)&lt;/span> AppleWebKit/537.36 &lt;span class="o">(&lt;/span>KHTML, like Gecko&lt;span class="o">)&lt;/span> Chrome/102.0.0.0 Safari/537.36&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>version&lt;span class="s2">&amp;#34;:&amp;#34;&amp;#34;,&amp;#34;&lt;/span>exception&lt;span class="s2">&amp;#34;:{&amp;#34;&lt;/span>Exception&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>Error&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>Message&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>touch&lt;span class="o">()&lt;/span>: Unable to create file /usr/share/webapps/nextcloud/config/config.php because Permission denied at /usr/share/webapps/nextcloud/lib/private/Config.php#263&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>Code&lt;span class="s2">&amp;#34;:0,&amp;#34;&lt;/span>Trace&lt;span class="s2">&amp;#34;:[{&amp;#34;&lt;/span>&lt;span class="k">function&lt;/span>&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>onError&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>class&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>OC&lt;span class="se">\\&lt;/span>Log&lt;span class="se">\\&lt;/span>ErrorHandler&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>type&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>::&lt;span class="s2">&amp;#34;},{&amp;#34;&lt;/span>file&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>/usr/share/webapps/nextcloud/lib/private/Config.php&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>line&lt;span class="s2">&amp;#34;:263,&amp;#34;&lt;/span>&lt;span class="k">function&lt;/span>&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>touch&lt;span class="s2">&amp;#34;},{&amp;#34;&lt;/span>file&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>/usr/share/webapps/nextcloud/lib/private/Config.php&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>line&lt;span class="s2">&amp;#34;:143,&amp;#34;&lt;/span>&lt;span class="k">function&lt;/span>&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>writeData&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>class&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>OC&lt;span class="se">\\&lt;/span>Config&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>type&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>-&amp;gt;&lt;span class="s2">&amp;#34;},{&amp;#34;&lt;/span>file&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>/usr/shar...PHP message: &lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;reqId&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;IBdcJOfunqHjhcnOBr9S&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:3,&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2022-06-24T00:58:25+00:00&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;remoteAddr&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;127.0.0.1&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;user&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;--&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;app&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;PHP&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;method&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;GET&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;url&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;message&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;fopen(/usr/share/webapps/nextcloud/config/config.php): Failed to open stream: Permission denied at /usr/share/webapps/nextcloud/lib/private/Config.php#264&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;userAgent&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;version&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;exception&amp;#34;&lt;/span>:&lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;Exception&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;Error&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;Message&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;fopen(/usr/share/webapps/nextcloud/config/config.php): Failed to open stream: Permission denied at /usr/share/webapps/nextcloud/lib/private/Config.php#264&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;Code&amp;#34;&lt;/span>:0,&lt;span class="s2">&amp;#34;Trace&amp;#34;&lt;/span>:&lt;span class="o">[{&lt;/span>&lt;span class="s2">&amp;#34;function&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;onError&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;class&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;OC\\Log\\ErrorHandler&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;type&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;::&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>,&lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;file&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;/usr/share/webapps/nextcloud/lib/private/Config.php&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;line&amp;#34;&lt;/span>:264,&lt;span class="s2">&amp;#34;function&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;fopen&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>,&lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;file&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;/usr/share/webapps/nextcloud/lib/private/Config.php&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;line&amp;#34;&lt;/span>:143,&lt;span class="s2">&amp;#34;function&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;writeData&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;class&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;OC\\Config&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Jun &lt;span class="m">24&lt;/span> 08:58:25 cloud.lengyefenghan.top nginx&lt;span class="o">[&lt;/span>2911&lt;span class="o">]&lt;/span>: 2022/06/24 08:58:25 &lt;span class="o">[&lt;/span>error&lt;span class="o">]&lt;/span> 2911#2911: *3 FastCGI sent in stderr: &lt;span class="s2">&amp;#34;PHP message: {&amp;#34;&lt;/span>reqId&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>IBdcJOfunqHjhcnOBr9S&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>level&lt;span class="s2">&amp;#34;:3,&amp;#34;&lt;/span>time&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>2022-06-24T00:58:25+00:00&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>remoteAddr&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>127.0.0.1&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>user&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>--&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>app&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>PHP&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>method&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>GET&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>url&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>/&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>message&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>fopen&lt;span class="o">(&lt;/span>/usr/share/webapps/nextcloud/data/nextcloud.log&lt;span class="o">)&lt;/span>: Failed to open stream: No such file or directory at /usr/share/webapps/nextcloud/lib/private/Log/File.php#84&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>userAgent&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>Mozilla/5.0 &lt;span class="o">(&lt;/span>W&lt;span class="s2">&amp;#34; while reading upstream, client: 127.0.0.1, server: cloud.lengyefenghan.top, request: &amp;#34;&lt;/span>GET / HTTP/2.0&lt;span class="s2">&amp;#34;, upstream: &amp;#34;&lt;/span>fastcgi://unix:/run/nextcloud/nextcloud.sock:&lt;span class="s2">&amp;#34;, host: &amp;#34;&lt;/span>cloud.lengyefenghan.top&lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>根据错误可知是权限问题，通过chmod 775 -R config可以修正，但是此处修正后仍然提示错误，经过检查是php-fpm配置文件丢失，在上一篇文章 &lt;a href="https://lengyefenghan.top/blogs/2022-04-08-1/">在Archlinux下安装nextcloud&lt;/a> 中修改的php-fpm进行的操作丢失，重新操作后恢复正常&lt;/p></content><category scheme="https://lengyefenghan.top/categories/nextcloud/" term="Nextcloud" label="Nextcloud"/><category scheme="https://lengyefenghan.top/tags/windows/" term="Windows" label="Windows"/><category scheme="https://lengyefenghan.top/tags/nextcloud/" term="nextcloud" label="nextcloud"/></entry><entry><title type="text">ArchLinux搭建gitea服务器</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2022-05-20-2/"/><id>https://lengyefenghan.top/blogs/2022-05-20-2/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2022-05-20T12:06:58+08:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">安装gitea 1 sudo pacman -S gitea 使用 MariaDB/MySQL数据库 安装数据库 1 sudo pacman -S mariadb 初始……</summary><content type="html">&lt;h2 id="安装gitea">安装gitea&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S gitea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用-mariadbmysql数据库">使用 MariaDB/MySQL数据库&lt;/h2>
&lt;ol>
&lt;li>安装数据库&lt;br>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S mariadb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>初始化数据库&lt;br>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo mariadb-install-db --user&lt;span class="o">=&lt;/span>mysql --basedir&lt;span class="o">=&lt;/span>/usr --datadir&lt;span class="o">=&lt;/span>/var/lib/mysql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>启动数据库&lt;br>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo systemctl start mariadb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo syetemctl &lt;span class="nb">enable&lt;/span> mariadb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>安全设置&lt;br>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo mysql_secure_installation
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="5">
&lt;li>创建数据库&lt;br>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mysql -u root -p
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql&amp;gt; CREATE DATABASE &lt;span class="sb">`&lt;/span>gitea&lt;span class="sb">`&lt;/span> DEFAULT CHARACTER SET &lt;span class="sb">`&lt;/span>utf8mb4&lt;span class="sb">`&lt;/span> COLLATE &lt;span class="sb">`&lt;/span>utf8mb4_unicode_ci&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql&amp;gt; CREATE USER &lt;span class="sb">`&lt;/span>gitea&lt;span class="sb">`&lt;/span>@&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span> IDENTIFIED BY &lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql&amp;gt; GRANT ALL PRIVILEGES ON &lt;span class="sb">`&lt;/span>gitea&lt;span class="sb">`&lt;/span>.* TO &lt;span class="sb">`&lt;/span>gitea&lt;span class="sb">`&lt;/span>@&lt;span class="sb">`&lt;/span>localhost&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql&amp;gt; FLUSH PRIVILEGES&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql&amp;gt; &lt;span class="se">\q&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="6">
&lt;li>尝试使用新用户登录数据库&lt;br>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mysql -u gitea -p -D gitea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="初步配置gitea">初步配置gitea&lt;/h2>
&lt;ol>
&lt;li>复制配置文件&lt;br>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">cp /etc/gitea/app.example.ini /etc/gitea/app.ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>修改配置文件&lt;br>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#/etc/gitea/app.ini&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DB_TYPE&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">mysql&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">HOST&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">127.0.0.1:3306 ; or /run/mysqld/mysqld.sock&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">NAME&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">gitea&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">USER&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">gitea&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">PASSWD&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">password&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>启动gitea&lt;br>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">systemctl start gitea
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> gitea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>测试登录&lt;br>打开浏览器输入&lt;br>&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code class="language-url" data-lang="url">http://ip:3000
&lt;/code>&lt;/pre>&lt;ol start="5">
&lt;li>在页面完成初始化操作
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>项目&lt;/th>
&lt;th>推荐值&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>站点名称&lt;/td>
&lt;td>gitea&lt;/td>
&lt;td>你自己的站点名称&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>仓库根目录&lt;/td>
&lt;td>/data/gitea(一个最好是存储盘的路径，最好热备份)&lt;/td>
&lt;td>你的仓库存储目录&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>服务器域名&lt;/td>
&lt;td>这里推荐localhost 或者你的域名&lt;/td>
&lt;td>你的服务器域名&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ssh服务端口&lt;/td>
&lt;td>22&lt;/td>
&lt;td>你的ssh服务端口&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>端口&lt;/td>
&lt;td>3000&lt;/td>
&lt;td>你的gitea服务器端口&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>日志目录&lt;/td>
&lt;td>/var/log/gitea&lt;/td>
&lt;td>你的日志目录&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;br> 设置完毕后点击安装等待安装完成&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/li>
&lt;/ol>
&lt;h2 id="进阶设置-通过https访问">进阶设置 通过https访问&lt;/h2>
&lt;ol>
&lt;li>设置监听范围为本机&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># /etc/gitea/app.ini&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[server]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">PROTOCOL&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">unix&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DOMAIN&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">git.domain.tld&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">ROOT_URL&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">https://git.domain.tld&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">HTTP_ADDR&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">/run/gitea/gitea.socket&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">LOCAL_ROOT_URL&lt;/span> &lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[session]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">COOKIE_SECURE&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>添加nginx反向代理配置文件&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf"># /etc/nginx/conf.d/gitea.conf
server {
listen 80;
listen [::]:80;
server_name gitea.lengyefenghan.top;
# Enforce HTTPS
return 301 https://$server_name$request_uri;
}
server {
listen 443 ssl;
listen [::]:443 ssl;
server_name gitea.lengyefenghan.top;
# Path to the root of your installation
ssl_certificate /etc/ssl/nginx/cert.pem;
ssl_certificate_key /etc/ssl/nginx/key.pem;
location / {
proxy_set_header Host $http_host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-Host $http_host;
proxy_set_header X-Forwarded-Server $http_host;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto $scheme;
gzip off;
proxy_redirect off;
proxy_buffering off;
client_max_body_size 256M;
proxy_pass http://unix:/run/gitea/gitea.socket;
}
}
&lt;/code>&lt;/pre>&lt;ol start="3">
&lt;li>重启nginx&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">systemctl restart nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="设置gitea的数据目录">设置gitea的数据目录&lt;/h2>
&lt;ol>
&lt;li>创建数据目录&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mkdir /mnt/data/gitea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>设置目录用户和组&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chown -R gitea:gitea /mnt/data/gitea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>修改servier文件&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#/etc/systemd/system/gitea.service.d/data-directory.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Service]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">ReadWriteDirectories&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">/mnt/data/gitea&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>重启gitea&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl restart gitea
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="开启ssh与ssh加固">开启ssh与ssh加固&lt;/h2>
&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf"># /etc/ssh/sshd_config
# Port 22 #注释掉port端口 改为listem ip+端口的形式
ListenAddress 0.0.0.0:22 #监听所有ipv4断22端口
ListenAddress 192.168.1.11:5022 #内网单独设置一个端口 只允许192.168.1.11的5022端口其中192.168.1.11为服务器的内网ip地址
# 强制使用公钥验证
PasswordAuthentication no #关闭密码验证
# 开启PAM认证
UsePAM yes
# 进制root用户登录
PermitRootLogin no
#添加允许gitea user登录 @host表示ip登录限制 也就是user只允许192.168.1.*的ip登录
AllowUsers gitea user@192.168.1.*
&lt;/code>&lt;/pre>&lt;h2 id="本站gitea">本站gitea&lt;/h2>
&lt;p>&lt;a src=https://gitea.lengyefenghan.top>点我访问&lt;/a>&lt;/p></content><category scheme="https://lengyefenghan.top/categories/archlinux/" term="Archlinux" label="Archlinux"/><category scheme="https://lengyefenghan.top/tags/archlinux/" term="archlinux" label="archlinux"/><category scheme="https://lengyefenghan.top/tags/gitea/" term="gitea" label="gitea"/></entry><entry><title type="text">ArchLinux Hyper-v下双网卡配置</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2022-05-20-1/"/><id>https://lengyefenghan.top/blogs/2022-05-20-1/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2022-05-20T12:06:54+08:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">外网网卡配置文件 外网eth0，由hyper-v进行NAT转发，使用hyprt-v自带……</summary><content type="html">&lt;h2 id="外网网卡配置文件">外网网卡配置文件&lt;/h2>
&lt;p>外网eth0，由hyper-v进行NAT转发，使用hyprt-v自带默认网络交换机&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Match]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">eth0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Network]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DHCP&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">ipv4&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="hyper-v配置内网网卡">hyper-v配置内网网卡&lt;/h2>
&lt;ol>
&lt;li>首先在huper-v创建一张内部专用网卡&lt;br>&lt;img src="https://lengyefenghan.top/images/2022-05-20/LAN-switch.png" alt="添加网卡">&lt;/li>
&lt;li>在网络设备管理器里面手动指定一个ip&lt;br>&lt;img src="https://lengyefenghan.top/images/2022-05-20/LAN-SET.png" alt="指定ip">&lt;/li>
&lt;/ol>
&lt;h2 id="内网网卡配置文件">内网网卡配置文件&lt;/h2>
&lt;p>内网eth1，用于设置内网静态IP，方便内网ssh链接&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Match]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">eth1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Network]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">Address&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">192.168.10.66/24&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#Gateway=192.168.10.1 注释掉gateway 也就是网关，这样子双网卡都使用第一张网卡的默认网关，否则需要添加路由表来解决无法上网问题&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DNS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">192.168.10.1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></content><category scheme="https://lengyefenghan.top/categories/archlinux/" term="Archlinux" label="Archlinux"/><category scheme="https://lengyefenghan.top/tags/archlinux/" term="archlinux" label="archlinux"/><category scheme="https://lengyefenghan.top/tags/hyper-v/" term="Hyper-v" label="Hyper-v"/></entry><entry><title type="text">openwrt二级路由开启ipv6</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2022-05-18-1/"/><id>https://lengyefenghan.top/blogs/2022-05-18-1/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2022-05-18T10:16:08+08:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">起因 因为nas之前用得是frp内网穿透方案，速度慢延迟高，且不稳定，随着ipv6的普……</summary><content type="html">&lt;h2 id="起因">起因&lt;/h2>
&lt;p>因为nas之前用得是frp内网穿透方案，速度慢延迟高，且不稳定，随着ipv6的普及决定试水ipv6,路由器是新路由3，一堆固件中openwrt ipv6支持较好，所以决定折腾下ipv6&lt;/p>
&lt;h2 id="网络环境">网络环境&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">设备&lt;/th>
&lt;th style="text-align:left">模式&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">光猫&lt;/td>
&lt;td style="text-align:left">路由模式&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">路由器ipv4&lt;/td>
&lt;td style="text-align:left">路由模式&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">路由器ipv6&lt;/td>
&lt;td style="text-align:left">中继模式(relay)&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="光猫设置">光猫设置&lt;/h2>
&lt;p>一般情况下光猫默认ipv4,可以手动设置拨号模式为ipv4&amp;amp;ipv6 或者直接致电运营商要求开启ipv6
&lt;br>检查方式:电脑确认没有关闭ipv6
&lt;br>&lt;img src="https://lengyefenghan.top/images/2022-05-18-1/win_enable_ipv6.png" alt="win10 ipv6">
&lt;br>然后在网络属性查看是否有240开头的ipv6地址
&lt;br>&lt;img src="https://lengyefenghan.top/images/2022-05-18-1/win_ipv6_status.png" alt="win10 ipv6状态">
&lt;br>到此光猫的设置就完成了&lt;/p>
&lt;h2 id="路由器设置">路由器设置&lt;/h2>
&lt;h3 id="wan6接口设置">WAN6接口设置&lt;/h3>
&lt;p>路由器是新路由三，固件是openwrt官方固件
&lt;br>检查openwrt接口,如果没有wan6口需要新建一个，类型为dhcpv6客户端，接口指向WAN
&lt;br>&lt;img src="https://lengyefenghan.top/images/2022-05-18-1/c_wan6.png" alt="创建WAN6接口">
&lt;br>设置请求类型为try，前缀获取为自动
&lt;br>&lt;img src="https://lengyefenghan.top/images/2022-05-18-1/wan6_cg.png" alt="设置类型为dhcpv6客户端">
&lt;br>配置防火墙到wan
&lt;br>&lt;img src="https://lengyefenghan.top/images/2022-05-18-1/wan6_fw.png" alt="配置防火墙到wan">
&lt;br>设置dhcp服务ipv6开启,ipv4忽略，全部设置为中继，且勾选主接口
&lt;br>&lt;img src="https://lengyefenghan.top/images/2022-05-18-1/wan6_dhcpv6s.png" alt="配置防火墙到wan">&lt;/p>
&lt;h3 id="lan接口设置">LAN接口设置&lt;/h3>
&lt;p>路由器lan口其他设置不变，单独更改dhcp为中继
&lt;br>&lt;img src="https://lengyefenghan.top/images/2022-05-18-1/lan-v6.png" alt="设置lan口dhcpv6">
&lt;font color="red">如果这时无法获取到ipv6地址，或者无法连接，尝试重启路由后无用请执行:在lan&amp;gt;高级设置&amp;gt;ipv6分配长度更改为64&lt;/font>
&lt;br>&lt;img src="https://lengyefenghan.top/images/2022-05-18-1/lan_v6_64.png" alt="设置lan口前缀">&lt;/p></content><category scheme="https://lengyefenghan.top/categories/openwrt/" term="openwrt" label="openwrt"/><category scheme="https://lengyefenghan.top/tags/linux/" term="linux" label="linux"/><category scheme="https://lengyefenghan.top/tags/openwrt/" term="openwrt" label="openwrt"/></entry><entry><title type="text">在Archlinux下安装nextcloud</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2022-04-08-1/"/><id>https://lengyefenghan.top/blogs/2022-04-08-1/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2022-04-08T18:32:37+08:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">概述 之前使用Alpine作为系统安装nextcloud但是手贱更新了下然后炸了，经过……</summary><content type="html">&lt;h2 id="概述">概述&lt;/h2>
&lt;p>之前使用Alpine作为系统安装nextcloud但是手贱更新了下然后炸了，经过两天的不断尝试，最后决定使用自己比较熟悉的Archlinux作为底层系统来搭建nextcloud服务器
文章很乱 有待整理&lt;/p>
&lt;h2 id="用到的知识">用到的知识&lt;/h2>
&lt;ol>
&lt;li>pacman 的使用&lt;/li>
&lt;li>mariadb 数据库的安装&lt;/li>
&lt;li>php-fpm 的安装配置&lt;/li>
&lt;li>Redis 缓存&lt;/li>
&lt;li>zerotier-one 搭建内网穿透&lt;/li>
&lt;li>nginx 反向代理，tcp分流&lt;/li>
&lt;/ol>
&lt;h2 id="搭建环境">搭建环境&lt;/h2>
&lt;h3 id="宿主机器">宿主机器&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>硬件&lt;/th>
&lt;th>配置&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>内存&lt;/td>
&lt;td>2G&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>cpu&lt;/td>
&lt;td>n2807&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ssd&lt;/td>
&lt;td>256G&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hdd&lt;/td>
&lt;td>1T&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>家庭带宽&lt;/td>
&lt;td>移动500M&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="vps机器">vps机器&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>硬件&lt;/th>
&lt;th>配置&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>内存&lt;/td>
&lt;td>512M&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>cpu&lt;/td>
&lt;td>1c1t&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>硬盘&lt;/td>
&lt;td>11G&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>带宽&lt;/td>
&lt;td>1G&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>线路&lt;/td>
&lt;td>bwh QNET&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>vps由于套了减速的cloudflare cdn所以放弃了cn2线路&lt;/p>
&lt;h2 id="宿主机安装">宿主机安装&lt;/h2>
&lt;h3 id="安装相应软件">安装相应软件&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>软件名称&lt;/th>
&lt;th>版本&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>nginx&lt;/td>
&lt;td>1.20.2-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>docker&lt;/td>
&lt;td>1:20.10.14-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>mariadb&lt;/td>
&lt;td>10.7.3-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>php&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>php-fpm&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nextcloud&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="配置">配置&lt;/h3>
&lt;h4 id="数据库">数据库&lt;/h4>
&lt;p>mariadb:&lt;/p>
&lt;p>建议设置为仅侦听本地 Unix 套接字&lt;/p>
&lt;p>从 MariaDB 10.6.0 开始，COMPRESSED行格式的表默认为只读。这是移除写入支持和弃用该功能的第一步。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">/etc/my.cnf.d/server.cnf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf">[mariadb-10.6]
innodb_read_only_compressed=OFF
&lt;/code>&lt;/pre>&lt;p>Nextcloud 自己的文档建议将事务隔离级别设置为 READ-COMMITTED。当您期望具有许多并发事务的高负载时，这一点尤其重要。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/etc/my.cnf.d/server.cnf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf">=
[mysqld]
transaction_isolation=READ-COMMITTED
skip_networking
&lt;/code>&lt;/pre>&lt;p>为nextcloud创建数据库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">mysql&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;nextcloud&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;你的密码&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">nextcloud&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CHARACTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">SET&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">utf8mb4&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COLLATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">utf8mb4_general_ci&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ALL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIVILEGES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">nextcloud&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;nextcloud&amp;#39;&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">FLUSH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">privileges&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="nginx">nginx&lt;/h4>
&lt;p>nginx:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">/etc/nginx/http.d/nextcloud.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf">upstream php-handler {
#server 127.0.0.1:9000;
server unix:/run/nextcloud/nextcloud.sock;
}
# Set the `immutable` cache control options only for assets with a cache busting `v` argument
map $arg_v $asset_immutable {
&amp;#34;&amp;#34; &amp;#34;&amp;#34;;
default &amp;#34;immutable&amp;#34;;
}
server {
listen 80;
listen [::]:80;
server_name cloud.example.com;
# Enforce HTTPS
return 301 https://$server_name$request_uri;
}
server {
listen 443 ssl http2;
listen [::]:443 ssl http2;
server_name cloud.example.com;
# Path to the root of your installation
root /usr/share/webapps/nextcloud;
# Use Mozilla&amp;#39;s guidelines for SSL/TLS settings
# https://mozilla.github.io/server-side-tls/ssl-config-generator/
ssl_certificate /etc/ssl/nginx/cloud.example.com.crt;
ssl_certificate_key /etc/ssl/nginx/cloud.example.com.key;
# HSTS settings
# WARNING: Only add the preload option once you read about
# the consequences in https://hstspreload.org/. This option
# will add the domain to a hardcoded list that is shipped
# in all major browsers and getting removed from this list
# could take several months.
#add_header Strict-Transport-Security &amp;#34;max-age=15768000; includeSubDomains; preload;&amp;#34; always;
# set max upload size and increase upload timeout:
client_max_body_size 512M;
client_body_timeout 300s;
fastcgi_buffers 64 4K;
# Enable gzip but do not remove ETag headers
gzip on;
gzip_vary on;
gzip_comp_level 4;
gzip_min_length 256;
gzip_proxied expired no-cache no-store private no_last_modified no_etag auth;
gzip_types application/atom+xml application/javascript application/json application/ld+json application/manifest+json application/rss+xml application/vnd.geo+json application/vnd.ms-fontobject application/wasm application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/bmp image/svg+xml image/x-icon text/cache-manifest text/css text/plain text/vcard text/vnd.rim.location.xloc text/vtt text/x-component text/x-cross-domain-policy;
# Pagespeed is not supported by Nextcloud, so if your server is built
# with the `ngx_pagespeed` module, uncomment this line to disable it.
#pagespeed off;
# HTTP response headers borrowed from Nextcloud `.htaccess`
add_header Referrer-Policy &amp;#34;no-referrer&amp;#34; always;
add_header X-Content-Type-Options &amp;#34;nosniff&amp;#34; always;
add_header X-Download-Options &amp;#34;noopen&amp;#34; always;
add_header X-Frame-Options &amp;#34;SAMEORIGIN&amp;#34; always;
add_header X-Permitted-Cross-Domain-Policies &amp;#34;none&amp;#34; always;
add_header X-Robots-Tag &amp;#34;none&amp;#34; always;
add_header X-XSS-Protection &amp;#34;1; mode=block&amp;#34; always;
# Remove X-Powered-By, which is an information leak
fastcgi_hide_header X-Powered-By;
# Specify how to handle directories -- specifying `/index.php$request_uri`
# here as the fallback means that Nginx always exhibits the desired behaviour
# when a client requests a path that corresponds to a directory that exists
# on the server. In particular, if that directory contains an index.php file,
# that file is correctly served; if it doesn&amp;#39;t, then the request is passed to
# the front-end controller. This consistent behaviour means that we don&amp;#39;t need
# to specify custom rules for certain paths (e.g. images and other assets,
# `/updater`, `/ocm-provider`, `/ocs-provider`), and thus
# `try_files $uri $uri/ /index.php$request_uri`
# always provides the desired behaviour.
index index.php index.html /index.php$request_uri;
# Rule borrowed from `.htaccess` to handle Microsoft DAV clients
location = / {
if ( $http_user_agent ~ ^DavClnt ) {
return 302 /remote.php/webdav/$is_args$args;
}
}
location = /robots.txt {
allow all;
log_not_found off;
access_log off;
}
# Make a regex exception for `/.well-known` so that clients can still
# access it despite the existence of the regex rule
# `location ~ /(\.|autotest|...)` which would otherwise handle requests
# for `/.well-known`.
location ^~ /.well-known {
# The rules in this block are an adaptation of the rules
# in `.htaccess` that concern `/.well-known`.
location = /.well-known/carddav { return 301 /remote.php/dav/; }
location = /.well-known/caldav { return 301 /remote.php/dav/; }
location /.well-known/acme-challenge { try_files $uri $uri/ =404; }
location /.well-known/pki-validation { try_files $uri $uri/ =404; }
# Let Nextcloud&amp;#39;s API for `/.well-known` URIs handle all other
# requests by passing them to the front-end controller.
return 301 /index.php$request_uri;
}
# Rules borrowed from `.htaccess` to hide certain paths from clients
location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)(?:$|/) { return 404; }
location ~ ^/(?:\.|autotest|occ|issue|indie|db_|console) { return 404; }
# Ensure this block, which passes PHP files to the PHP process, is above the blocks
# which handle static assets (as seen below). If this block is not declared first,
# then Nginx will encounter an infinite rewriting loop when it prepends `/index.php`
# to the URI, resulting in a HTTP 500 error response.
location ~ \.php(?:$|/) {
# Required for legacy support
rewrite ^/(?!index|remote|public|cron|core\/ajax\/update|status|ocs\/v[12]|updater\/.+|oc[ms]-provider\/.+|.+\/richdocumentscode\/proxy) /index.php$request_uri;
fastcgi_split_path_info ^(.+?\.php)(/.*)$;
set $path_info $fastcgi_path_info;
try_files $fastcgi_script_name =404;
include fastcgi_params;
fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
fastcgi_param PATH_INFO $path_info;
fastcgi_param HTTPS on;
fastcgi_param modHeadersAvailable true; # Avoid sending the security headers twice
fastcgi_param front_controller_active true; # Enable pretty urls
fastcgi_pass php-handler;
fastcgi_intercept_errors on;
fastcgi_request_buffering off;
fastcgi_max_temp_file_size 0;
}
location ~ \.(?:css|js|svg|gif|png|jpg|ico|wasm|tflite|map)$ {
try_files $uri /index.php$request_uri;
add_header Cache-Control &amp;#34;public, max-age=15778463, $asset_immutable&amp;#34;;
access_log off; # Optional: Don&amp;#39;t log access to assets
location ~ \.wasm$ {
default_type application/wasm;
}
}
location ~ \.woff2?$ {
try_files $uri /index.php$request_uri;
expires 7d; # Cache-Control policy borrowed from `.htaccess`
access_log off; # Optional: Don&amp;#39;t log access to assets
}
# Rule borrowed from `.htaccess`
location /remote {
return 301 /remote.php$request_uri;
}
location / {
try_files $uri $uri/ /index.php$request_uri;
}
}
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">/etc/webapps/nextcloud/config/config.php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;trusted_domains&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">array&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">0&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">1&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;cloud.example.org&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;overwrite.cli.url&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;https://cloud.example.org/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;htaccess.RewriteBase&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="数据盘">数据盘&lt;/h4>
&lt;p>不论何种方式请记得盘的挂载位置
本文中硬盘挂载在 /mnt/data
并且设置开机自动挂载
记得修改全新&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">chown nextcloud:nextcloud -R /mnt/data/nextcloud
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">/etc/webapps/nextcloud/config/config.php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;datadirectory&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;/mnt/data/nextcloud&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="php-php-fpm">php php-fpm&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">/etc/php/php.ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf">[php]
extension=gd
extension=iconv
extension=intl
extension=mysqli
zend_extension=opcache
extension=pdo_mysql
memory_limit = 512M
upload_max_filesize = 1024M
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">/etc/php/php-fpm.d/nextcloud.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf">[nextcloud]
user = nextcloud
group = nextcloud
listen = /run/nextcloud/nextcloud.sock
env[PATH] = /usr/local/bin:/usr/bin:/bin
env[TMP] = /tmp
; should be accessible by your web server
listen.owner = http
listen.group = http
pm = dynamic
pm.max_children = 15
pm.start_servers = 2
pm.min_spare_servers = 1
pm.max_spare_servers = 3
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">systemctl edit php-fpm.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf">[Service]
# Your data directory
ReadWritePaths=/var/lib/nextcloud/data
ReadWritePaths=/mnt/data/nextcloud
# Optional: add if you&amp;#39;ve set the default apps directory to be writable in config.php
ReadWritePaths=/usr/share/webapps/nextcloud/apps
# Optional: unnecessary if you&amp;#39;ve set &amp;#39;config_is_read_only&amp;#39; =&amp;gt; true in your config.php
ReadWritePaths=/usr/share/webapps/nextcloud/config
ReadWritePaths=/etc/webapps/nextcloud/config
# Optional: add if you want to use Nextcloud&amp;#39;s internal update process
# ReadWritePaths=/usr/share/webapps/nextcloud
&lt;/code>&lt;/pre>&lt;h3 id="redis-缓存">Redis 缓存&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">/etc/php/conf.d/redis.ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf">extension=redis
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">/etc/php/conf.d/igbinary.ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf">[igbinary]
extension=igbinary.so
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">/etc/webapps/nextcloud/config/config.php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;pre tabindex="0">&lt;code class="language-conf" data-lang="conf">&amp;#39;memcache.distributed&amp;#39; =&amp;gt; &amp;#39;OCMemcacheRedis&amp;#39;,
&amp;#39;memcache.local&amp;#39; =&amp;gt; &amp;#39;OCMemcacheRedis&amp;#39;,
&amp;#39;memcache.locking&amp;#39; =&amp;gt; &amp;#39;OCMemcacheRedis&amp;#39;,
&amp;#39;redis&amp;#39; =&amp;gt; array(
&amp;#39;host&amp;#39; =&amp;gt; &amp;#39;localhost&amp;#39;,
&amp;#39;port&amp;#39; =&amp;gt; 6379,
),
&lt;/code>&lt;/pre>&lt;h2 id="nextcloud安装">nextcloud安装&lt;/h2>
&lt;p>occ maintenance:install --database mysql --database-name nextcloud --database-host localhost --database-user nextcloud --database-pass='你的密码' --data-dir /mnt/data/nextcloud&lt;/p></content><category scheme="https://lengyefenghan.top/categories/archlinux/" term="Archlinux" label="Archlinux"/><category scheme="https://lengyefenghan.top/tags/archlinux/" term="archlinux" label="archlinux"/><category scheme="https://lengyefenghan.top/tags/nextcloud/" term="nextcloud" label="nextcloud"/></entry><entry><title type="text">Go 通过windows wmi获取系统信息</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2021-04-21/"/><id>https://lengyefenghan.top/blogs/2021-04-21/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2021-04-21T08:56:32+08:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">wmi是什么 WMI，是Windows 2K/XP管理系统的核心；对于其他的Win32操……</summary><content type="html">&lt;h1 id="wmi是什么">wmi是什么&lt;/h1>
&lt;p>WMI，是Windows 2K/XP管理系统的核心；对于其他的Win32操作系统，WMI是一个有用的插件。WMI以CIMOM为基础，CIMOM即公共信息模型对象管理器（Common Information Model Object Manager），是一个描述操作系统构成单元的对象数据库，为MMC和脚本程序提供了一个访问操作系统构成单元的公共接口。有了WMI，工具软件和脚本程序访问操作系统的不同部分时不需要使用不同的API；相反，操作系统的不同部分都可以插入WMI，如图所示，工具软件和脚本程序可以方便地读写WMI。&lt;/p>
&lt;h1 id="go语言如何调用">Go语言如何调用&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Go" data-lang="Go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;github.com/StackExchange/wmi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//根据文档定义的完整结构体
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//https://docs.microsoft.com/en-us/windows/win32/cimwin32prov/win32-processor
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">Win32_Processor&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">AddressWidth&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Architecture&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">AssetTag&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Availability&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Caption&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Characteristics&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ConfigManagerErrorCode&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ConfigManagerUserConfig&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">CpuStatus&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">CreationClassName&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">CurrentClockSpeed&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">CurrentVoltage&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DataWidth&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Description&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">DeviceID&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ErrorCleared&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ErrorDescription&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ExtClock&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Family&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">InstallDate&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">L2CacheSize&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">L2CacheSpeed&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">L3CacheSize&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">L3CacheSpeed&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LastErrorCode&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Level&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LoadPercentage&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Manufacturer&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MaxClockSpeed&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">NumberOfCores&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">NumberOfEnabledCore&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">NumberOfLogicalProcessors&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">OtherFamilyDescription&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PartNumber&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PNPDeviceID&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PowerManagementCapabilities&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">PowerManagementSupported&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ProcessorId&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ProcessorType&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Revision&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Role&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">SecondLevelAddressTranslationExtensions&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">SerialNumber&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">SocketDesignation&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Status&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">StatusInfo&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Stepping&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">SystemCreationClassName&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">SystemName&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ThreadCount&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">UniqueId&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">UpgradeMethod&lt;/span> &lt;span class="kt">uint16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Version&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">VirtualizationFirmwareEnabled&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">VMMonitorModeExtensions&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">VoltageCaps&lt;/span> &lt;span class="kt">uint32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//通过wmi库获取类，返回给结构体
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">GetWin32_Processor&lt;/span>&lt;span class="p">()[]&lt;/span>&lt;span class="nx">Win32_Processor&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">info&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">Win32_Processor&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">wmi&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Select * from Win32_Processor&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">info&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">info&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//输出查询结果
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">GetWin32_Processor&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="接口文档位置">接口文档位置&lt;/h1>
&lt;p>&lt;a href="https://docs.microsoft.com/en-us/windows/win32/cimwin32prov/cimwin32-wmi-providers">https://docs.microsoft.com/en-us/windows/win32/cimwin32prov/cimwin32-wmi-providers&lt;/a>&lt;/p></content><category scheme="https://lengyefenghan.top/categories/golang/" term="golang" label="golang"/><category scheme="https://lengyefenghan.top/tags/wmi/" term="wmi" label="wmi"/><category scheme="https://lengyefenghan.top/tags/golang/" term="golang" label="golang"/></entry><entry><title type="text">go-sciter踩坑记录</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2021-03-23/"/><id>https://lengyefenghan.top/blogs/2021-03-23/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2021-03-23T13:39:08+08:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">已经解决 css宽度100%异常问题： width: *; 用星号代替即可 出现tis css html 等无法load //xx.xx……</summary><content type="html">&lt;h2 id="已经解决">已经解决&lt;/h2>
&lt;ol>
&lt;li>css宽度100%异常问题： width: *; 用星号代替即可&lt;/li>
&lt;li>出现tis css html 等无法load //xx.xx error 161：
使用Go的filepathAbs获取绝对路径&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">path&lt;/span> &lt;span class="p">,&lt;/span>&lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">filepath&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">//filepath.Abs(string) string error获取绝对路径
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">sciter&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadHtml&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">html&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">path&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">//LoadHtml第二个参数填写html文件所在的文件夹的绝对路径
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">sciter&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">path&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s">&amp;#34;xxx.html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">//LoadFile用绝对路径获取文件名
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>另一个解决方案：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">html&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;style&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="nx">css&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;/style&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;script type=&amp;#34;text/tiscript&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="nx">tis&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;/script&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">tis&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`xxxx`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">css&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`xxx`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">html&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">html&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;{{css}}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">css&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">html&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">html&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;{{tis}}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">tis&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">w&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadHtml&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">html&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>view.load(url:string[, now: bool]) : true/false 需要读取一个目录，可以通过获取win的AppData目录来写入配置文件，临时文件等等。view.load将会从url指定的路径读取一个html文件并加载.AppData文件夹下的Local下面新建文件夹就可以用于存放配置文件等，其中的Temp文件夹会被清理&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;runtime&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">UserHomeDir&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">runtime&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">GOOS&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;windows&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">home&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;HOMEDRIVE&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;HOMEPATH&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">home&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">home&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;USERPROFILE&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">home&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;HOME&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">homeDir&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">UserHomeDir&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">homeDir&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s">&amp;#34;\\AppData&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>sciter中代码没错但是没法启动：请更新到开发版本&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">go get -u github.com/sciter-sdk/go-sciter@master
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="5">
&lt;li>出现内存报错，例如：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">panic: runtime error: invalid memory address or nil pointer dereference
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>请检查函数返回的err是否处理，强制使用if判断err,当err为空的时候继续执行，否则照成不必要的错误&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ioutil&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;s:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Printl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Error&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="6">
&lt;li>部分情况下css文件中会通过url(xx.tis)的方法引入tis脚本，例如：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-css" data-lang="css">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">selector&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">prototype&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ClassName&lt;/span> &lt;span class="nb">url&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sx">file.tis&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">/* ... 其他CSS属性 */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其中有意思的是&lt;/p>
&lt;ul>
&lt;li>
&lt;ul>selector是一个有效的CSS选择器, 示例:
&lt;li>input[type=foo] { prototype: MyWidget; } &lt;/li>
&lt;li>foo { display:block; prototype: MyWidget; }&lt;/li>
&lt;li>widget { prototype: MyWidget; }&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ClassName是你的脚本类的名称;&lt;/li>
&lt;li style="color:red;">url(file.tis)是包含该脚本类的脚本文件的url。如果脚本类是定义在文档本身的script节中的话，这个字段是可省略的。&lt;/li>
&lt;/ul>
最后红色字体的内容说明了，如果这个tis里面的内容包含在html里面的情况下，就不需要url引入组件，也就是可以通过上面的方式合并文件</content><category scheme="https://lengyefenghan.top/categories/golang/" term="golang" label="golang"/><category scheme="https://lengyefenghan.top/tags/sciter/" term="sciter" label="sciter"/><category scheme="https://lengyefenghan.top/tags/golang/" term="golang" label="golang"/></entry><entry><title type="text">泰拉瑞亚修改器</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/terraria-edit-win/"/><id>https://lengyefenghan.top/blogs/terraria-edit-win/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2021-02-01T04:36:12+00:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">关于软件 泰拉瑞亚修改器，适配steam版本，这个页面的只支持windows系统 每个版……</summary><content type="html">&lt;h3 id="关于软件">关于软件&lt;/h3>
&lt;p>泰拉瑞亚修改器，适配steam版本，这个页面的只支持windows系统
每个版本都会附带展示视频，功能介绍下载链接&lt;/p>
&lt;h3 id="最新版本">【最新版本】&lt;/h3>
&lt;ol>
&lt;li>版本代号：20210131&lt;/li>
&lt;li>版本名称：v2.0.1&lt;/li>
&lt;li>支持游戏版本：steam 1.4.1.2&lt;/li>
&lt;li>更新内容：重构代码，更加稳定的更新，支持最新1.4.1.2&lt;/li>
&lt;/ol>
&lt;h3 id="演示视频">演示视频&lt;/h3>
&lt;iframe src="https://lengyefenghan.top//player.bilibili.com/player.html?aid=540917708&amp;bvid=BV1fi4y1s7xx&amp;cid=198836274&amp;page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> &lt;/iframe>
&lt;p>&lt;a href="https://www.bilibili.com/video/BV1fi4y1s7xx/">点击查看原始视频&lt;/a>&lt;/p>
&lt;h3 id="下载地址">下载地址&lt;/h3>
&lt;p>&lt;a href="https://lengyefenghan.lanzous.com/b015iabqh">蓝奏云&lt;/a>&lt;/p>
&lt;h3 id="历史版本-20200730">历史版本 [20200730]&lt;/h3>
&lt;ol>
&lt;li>版本代号：20200730&lt;/li>
&lt;li>版本名称：v1.4.0.5&lt;/li>
&lt;li>支持游戏版本：steam 1.4.0.5&lt;/li>
&lt;li>更新内容：修复报错错误1的BUG，更新新的界面，采用新的代码逻辑&lt;/li>
&lt;/ol>
&lt;h3 id="历史版本-20200630">历史版本 [20200630]&lt;/h3>
&lt;ol>
&lt;li>版本代号：20200630&lt;/li>
&lt;li>版本名称：v1.4.0.5&lt;/li>
&lt;li>支持游戏版本：steam 1.4.0.5&lt;/li>
&lt;li>更新内容：增强兼容性&lt;/li>
&lt;/ol>
&lt;h3 id="历史版本-20200605">历史版本 [20200605]&lt;/h3>
&lt;ol>
&lt;li>版本代号：20200605&lt;/li>
&lt;li>版本名称：v1.4.0.5&lt;/li>
&lt;li>支持游戏版本：steam 1.4.0.5&lt;/li>
&lt;li>功能：锁血锁蓝&lt;/li>
&lt;/ol></content><category scheme="https://lengyefenghan.top/categories/game/" term="Game" label="Game"/><category scheme="https://lengyefenghan.top/tags/ce/" term="CE" label="CE"/><category scheme="https://lengyefenghan.top/tags/game/" term="Game" label="Game"/></entry><entry><title type="text">算法与数据结果绪论-01-什么是数据结构</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2021-01-19/"/><id>https://lengyefenghan.top/blogs/2021-01-19/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2021-01-19T22:05:39+08:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">算法与数据结构-01-绪论 什么是数据结构 数据结构是一门研究非数值计算的程序设计问题中……</summary><content type="html">&lt;h1 id="算法与数据结构-01-绪论">算法与数据结构-01-绪论&lt;/h1>
&lt;h2 id="什么是数据结构">什么是数据结构&lt;/h2>
&lt;p>数据结构是一门研究非数值计算的程序设计问题中的操作对象以及他们之间的关系和操作等问题的相关学科。&lt;/p>
&lt;p>（程序设计 = 数据结构 + 算法）&lt;/p>
&lt;h2 id="数据结构分为逻辑结构和理物理结构">数据结构分为逻辑结构和理物理结构&lt;/h2>
&lt;ol>
&lt;li>逻辑结构：是指数据对象中数据元素之间的相互关系&lt;/li>
&lt;li>物理结构：是指数据的逻辑结构在计算机中的存储形式&lt;/li>
&lt;/ol>
&lt;h2 id="四大数据结构">四大数据结构&lt;/h2>
&lt;ol>
&lt;li>集合结构：集合结构中的数据元素除了同属于同一个集合外，他们之间没有其他的关系&lt;/li>
&lt;li>线性结构：线性结构中的数据元素之间是一对一的关系&lt;/li>
&lt;li>树形结构：树形结构中的数据元素之间存在一种一对多的层次关系&lt;/li>
&lt;li>图形结构：图形结构的数据元素是多对多的关系&lt;/li>
&lt;/ol>
&lt;h2 id="物理结构">物理结构&lt;/h2>
&lt;p>是指如何把数据元素存储到计算机的存储器中&lt;/p>
&lt;p>（存储器主要是针对内存而言的，像硬盘，软盘，光盘，等外部存储的数据结构通常用文件结构来描述）&lt;/p>
&lt;h2 id="数据元素存储形式有顺序存储和链式存储">数据元素存储形式有顺序存储和链式存储&lt;/h2>
&lt;ol>
&lt;li>顺序存储：是把数据元素存放在地址连续的存储单元里，其数据间的逻辑关系和物理关系是一致的（例如数组）&lt;/li>
&lt;li>链式存储：是把数据元素存放在任意的存储单元里，这组存储单元可以是连续的也可以是不连续的&lt;/li>
&lt;/ol></content><category scheme="https://lengyefenghan.top/categories/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" term="算法与数据结构" label="算法与数据结构"/><category scheme="https://lengyefenghan.top/tags/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" term="算法与数据结构" label="算法与数据结构"/><category scheme="https://lengyefenghan.top/tags/%E7%AC%94%E8%AE%B0/" term="笔记" label="笔记"/></entry><entry><title type="text">想不想修真虚拟大师飞天辅助教程</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2021-01-03/"/><id>https://lengyefenghan.top/blogs/2021-01-03/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2021-01-03T12:13:00+08:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">2022-04-08 由于飞天不再可用，请换其他辅助 环境准备 需要下载的app： vmospro (手机自带应用商店搜索)……</summary><content type="html">&lt;h1 id="2022-04-08">2022-04-08&lt;/h1>
&lt;p>由于飞天不再可用，请换其他辅助&lt;/p>
&lt;h1 id="环境准备">环境准备&lt;/h1>
&lt;p>需要下载的app：&lt;/p>
&lt;ol>
&lt;li>vmospro (手机自带应用商店搜索)&lt;br />&lt;a href="http://www.vmos.cn/product_center_vmospro.htm">点击前往官网下载&lt;/a>&lt;/li>
&lt;li>飞天助手最新版 &lt;a href="https://www.aistool.com/">点击前往官网下载&lt;/a>&lt;/li>
&lt;li>过检测软件 A,B &lt;br />&lt;a href="https://lengyefenghan.lanzoux.com/b01615vej">蓝奏云极速下载 密码:c4gw&lt;/a>&lt;br />&lt;a href="https://pan.baidu.com/s/1ahwIuPSi3Dwsv-WVFccyug">备用一，百度云 提取码rimi&lt;/a>&lt;/li>
&lt;li>想不想修真游戏本体（请从自己的渠道下载）&lt;/li>
&lt;/ol>
&lt;h1 id="搭建环境">搭建环境&lt;/h1>
&lt;ol>
&lt;li>安装vmospro&lt;/li>
&lt;li>打开vmospro,点击加号选择rom,推荐按如图所示选择
&lt;img src="https://cdn.jsdelivr.net/gh/lengyefenghan/blog-imgages/blog/2021-01-03-img1.png" alt="avatar">&lt;/li>
&lt;/ol>
&lt;!-- &lt;img src="https://cdn.jsdelivr.net/gh/lengyefenghan/blog-imgages/blog/2021-01-03-img1.png"> -->
&lt;ol start="3">
&lt;li>等待安装完毕后进入系统点击文件中转站
&lt;img src="https://cdn.jsdelivr.net/gh/lengyefenghan/blog-imgages/blog/2021-01-03-img2.png" alt="avatar">&lt;/li>
&lt;li>点击导入
&lt;img src="https://cdn.jsdelivr.net/gh/lengyefenghan/blog-imgages/blog/2021-01-03-img3.png" alt="avatar">&lt;/li>
&lt;li>点击应用，选择从安装包导入下载好的飞天助手、过检测应用A,B、想不想修真
&lt;img src="https://cdn.jsdelivr.net/gh/lengyefenghan/blog-imgages/blog/2021-01-03-img4.png" alt="avatar">&lt;/li>
&lt;li>检查软件是否都正常安装&lt;/li>
&lt;/ol>
&lt;h1 id="使用脚本">使用脚本&lt;/h1>
&lt;ol>
&lt;li>
&lt;p>打开飞天助手给予所有权限，根据推荐使用想不想修真明月辅助
&lt;img src="https://cdn.jsdelivr.net/gh/lengyefenghan/blog-imgages/blog/2021-01-03-img5.png" alt="avatar">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>打开想不想修真点击登录（切模拟器需要手机验证码登录，微信登录需要在模拟器里安装微信）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>配置脚本自行研究或看文章_(建设中)&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h1 id="faq-如果有更多问题请加qq群-773581018">FAQ 如果有更多问题请加qq群 773581018&lt;/h1>
&lt;ol>
&lt;li>
&lt;p>为什么都装上脚本提示分辨率不适用:请修改虚拟大师分辨率为720x1280 320dpi&lt;/p>
&lt;/li>
&lt;li>
&lt;p>这个软件耗电好高啊怎么办:请按照1的修改分辨率，并且设置虚拟大师帧数为24以上（推荐25）虚拟大师默认设置为60，降低帧数能大幅降低损耗&lt;/p>
&lt;/li>
&lt;li>
&lt;p>软件挂后台老是被杀:请根据自己的手机开启虚拟大师的自启权限，并且加入白名单&lt;/p>
&lt;/li>
&lt;li>
&lt;p>上面的分辨率帧数都设置了手机特别卡怎么办:请检查自己手机配置，另外华为手机卡顿请直接向官方反馈他们在积极适配大多数华为手机都可以正常用&lt;/p>
&lt;/li>
&lt;li>
&lt;p>虚拟大师无法添加分辨率，请移动虚拟大师悬浮球位置后点击重试，另外虚拟大师官方已经不怎么管了，建议换vmospro（也是虚拟大师家的）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>更多未解决问题加群:&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/lengyefenghan/blog-imgages/share/qqqun.png" alt="avatar">&lt;/p></content><category scheme="https://lengyefenghan.top/categories/game/" term="Game" label="Game"/><category scheme="https://lengyefenghan.top/tags/game/" term="Game" label="Game"/><category scheme="https://lengyefenghan.top/tags/%E6%83%B3%E4%B8%8D%E6%83%B3%E4%BF%AE%E7%9C%9F/" term="想不想修真" label="想不想修真"/></entry><entry><title type="text">Linux游戏-星界边境</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/linuxgamecn-starbound/"/><id>https://lengyefenghan.top/blogs/linuxgamecn-starbound/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2020-07-05T09:26:16+08:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">游戏简介 《星界边境(Starbound)》是一款2D像素点风格，科幻背景的沙盒游戏，……</summary><content type="html">&lt;h2 id="游戏简介">游戏简介&lt;/h2>
&lt;p>《星界边境(Starbound)》是一款2D像素点风格，科幻背景的沙盒游戏，游戏在风格上有些类似于《泰拉瑞亚(Terraria)》和《我的世界(minecraft)》。&lt;/p>
&lt;p>在《星界边境》，你将扮演一个刚刚从自己的母星中逃离，便在另一个星球坠毁的角色。从此你就开始了自己的冒险生涯，在这个无限的宇宙中探索、发现，挣扎求存。&lt;/p>
&lt;p>你从一场浩劫中幸存，你驾驶宇宙飞船逃离了自己的母星，你失去了自己的家园，却拥有了整个宇宙——这个宇宙是你的沙盘，这里的每一颗星球、每一寸土壤、每一棵植被……都是你建设基地并武装自己的素材。当然，这是一个机遇与敌意并存的宇宙，星球的原住民——也许还包括其他更具威胁的外来力量，并不认可你对这 个宇宙的所有权，它们会成为你的敌人……也可能成为一种需要通过特殊途径采集
的资源。&lt;/p>
&lt;p>你并非孤立无援，亦无需只身一人对抗整个世界的敌意：你的种族已经将文明的火种托付给你，你继承了全部可用于求生和战斗的科技，你知道如何将自然的恩赐转 化为无法撼动之物与无坚不摧之力;其他幸存者也会加入你的探索与冒险之中，为了生存或是超越生存的其他目标与你携手并肩。&lt;/p>
&lt;p>从徒有四壁的陋室一步步发展到遍布精密科技的要塞，你成功地在一颗星球上建立起了自己的基地。你将文明的种子播撒至荒野之中，并浇灌其成长为钢筋混凝土的 丛林或是参天大树。你在危机四伏的地下城中探索熟悉或陌生的文明在这颗星球上留下的遗迹，在获取战利品的同时揭开唯有造物主知晓的秘密。当你对一颗星球的 细节已经了如指掌，将地平线建设成为自己的庭院围墙之时，你也许会感到满足，
也许会感到厌倦，但这并不意味着故事的终结：你一定会离开这颗星球，返回飞 船，在浩瀚的星空中选择另一颗未知的星球作为新的目标，游历全新的风景，从一草一木开始改造另一个世界……在千亿星辰之间谱写属于你的故事。&lt;/p>
&lt;p>本文由百度贴吧starbound吧吧主“真Leemoon”供稿-转载自游侠网&lt;/p>
&lt;h2 id="游戏配置要求">游戏配置要求&lt;/h2>
&lt;p>最低配置:&lt;/p>
&lt;ul>
&lt;li>操作系统: Debian Stable or Ubuntu 12.04 LTS or later&lt;/li>
&lt;li>处理器: Core 2 Duo&lt;/li>
&lt;li>内存: 2 GB RAM&lt;/li>
&lt;li>显卡: 256 MB graphics memory and opengl 2.1 compatible gpu&lt;/li>
&lt;li>网络: 宽带互联网连接&lt;/li>
&lt;li>存储空间: 需要 3 GB 可用空间&lt;/li>
&lt;/ul>
&lt;p>推荐配置:&lt;/p>
&lt;ul>
&lt;li>操作系统: Debian Stable or Ubuntu 12.04 LTS or later&lt;/li>
&lt;li>处理器: Core i3&lt;/li>
&lt;li>内存: 4 GB RAM&lt;/li>
&lt;li>显卡: 256 MB graphics memory and opengl 2.1 compatible discrete gpu&lt;/li>
&lt;li>网络: 宽带互联网连接&lt;/li>
&lt;li>存储空间: 需要 4 GB 可用空间&lt;/li>
&lt;/ul>
&lt;h2 id="安装步骤">安装步骤&lt;/h2>
&lt;ol>
&lt;li>打开网站&lt;a href="https://www.linuxgame.cn/starbound">&lt;a href="https://www.linuxgame.cn/starbound">https://www.linuxgame.cn/starbound&lt;/a>&lt;/a> 下载游戏&lt;/li>
&lt;li>进入到下载的文件，查看下载的文件，例如名字为 starbound_1.3.4.24710_amd64.appimage&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>lengyefenghan@lengyefeghan Download&lt;span class="o">]&lt;/span>$ : ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> starbound_1.3.4.24710_amd64.appimage
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>找到下载好的文件,为文件添加可执行权限&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl"> chmod +x starbound_1.3.4.24710_amd64.appimage
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>安装缺少的依赖 libsdl2&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl"> apt install libsdl2 &lt;span class="c1">#ubuntu&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pacman -S sdl2 &lt;span class="c1">#arch&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="4">
&lt;li>在终端里面运行游戏&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl"> starbound_1.3.4.24710_amd64.appimage
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="演示视频">演示视频&lt;/h2>
&lt;iframe src="https://lengyefenghan.top//player.bilibili.com/player.html?aid=626167718&amp;bvid=BV1it4y1975R&amp;cid=209012544&amp;page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> &lt;/iframe>
&lt;p>&lt;a href="https://www.bilibili.com/video/BV1it4y1975R/">视频地址&lt;/a>&lt;/p></content><category scheme="https://lengyefenghan.top/categories/game/" term="Game" label="Game"/><category scheme="https://lengyefenghan.top/tags/archlinux/" term="archlinux" label="archlinux"/><category scheme="https://lengyefenghan.top/tags/game/" term="Game" label="Game"/></entry><entry><title type="text">archlinux从aur源编译yay</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2020-01-20/"/><id>https://lengyefenghan.top/blogs/2020-01-20/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2020-01-20T10:02:20+00:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">aur全称Arch User Repository，是为用户而建、由用户主导的 Arch 软件仓库。AU……</summary><content type="html">&lt;p>&lt;font color=red>  aur全称Arch User Repository，是为用户而建、由用户主导的 Arch 软件仓库。AUR 中的软件包以软件包生成脚本（PKGBUILD）的形式提供，用户自己通过 makepkg 生成包，再由 pacman 安装。创建 AUR 的初衷是方便用户维护和分享新软件包，并由官方定期从中挑选软件包进入 community 仓库。本文介绍用户访问和使用 AUR 的方法。&lt;/font>&lt;/p>
&lt;p>  早期在arch的官方源里面包含了aur的管理器，方便安装aur源的软件，但是近期的更新中把aur源的管理器逐渐从官方源移回了aur，也就是需要自己编译安装，这里就举例安装yay，之后使用yay安装软件。&lt;/p>
&lt;p>1.安装依赖，包括base-devel和git &lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S base-devel git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>2.下载代码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git clone https://aur.archlinux.org/yay.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>3.或者下载快照，并解压&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl curl -L -O https://aur.archlinux.org/cgit/aur.git/snapshot/yay.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar zxvf yay.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>4.使用cd命令进入yay文件夹&lt;/p>
&lt;p>5.可选：less 查看PKGBUILD,然后编译安装&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">makepkg -si编译不能以root用户运行
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>  过程中包括输入当前用户密码使用sudo命令安装依赖，例如yay安装的依赖就是go，因为yay使用go语言开发&lt;/p>
&lt;p>6.使用yay&lt;/p>
&lt;p>&lt;font color=red>yay需要在非root用户下运行&lt;/font>&lt;/p>
&lt;p>  命令参数和pacman基本一样&lt;/p>
&lt;font color=green>
注意事项：
&lt;p>  1.aur的PKGBUILD体积较小，建议了解一下，速度慢换aur源也没用，不如自己修改PKGBUILD里面的下载链接&lt;/p>
&lt;p>  2.aur源的软件存在风险，不兼容，版本过旧的问题，需要自己去探索和研究&lt;/p>
&lt;p>  3.aur里面还包含了很多国产软件包括360浏览器什么的&lt;/p>
&lt;p>  4.如果遇到yay版本过老的问题可以参考本人其他有关aur的文章，以时间为准，或者去研究arch的官方wiki&lt;/p>
&lt;p>  5.本文的方法也可作为手动编译aur源其他软件的文档，注意仅仅是参考&lt;/p>
&lt;p>  6.直接git clone得到的是最新上传的，不一定需要下载快照
&lt;/font>&lt;/p></content><category scheme="https://lengyefenghan.top/categories/archlinux/" term="Archlinux" label="Archlinux"/><category scheme="https://lengyefenghan.top/tags/archlinux/" term="archlinux" label="archlinux"/><category scheme="https://lengyefenghan.top/tags/aur/" term="aur" label="aur"/></entry><entry><title type="text">阿里云LNMP环境搭建（三）-搭建lnmp并测试</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2019-12-21-3/"/><id>https://lengyefenghan.top/blogs/2019-12-21-3/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2019-12-21T11:39:56+00:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">本文章具有一定时效性，最后更新时间为2019年12月20日星期五，并且会在结尾列出参……</summary><content type="html">&lt;p>&lt;font color=red>  本文章具有一定时效性，最后更新时间为2019年12月20日星期五，并且会在结尾列出参考文献资料，本篇仅为后篇，后续更新其他相关，记得关注。&lt;/font>&lt;/p>
&lt;p>1.安装nginx php mariadb&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S nginx mariadb mariadb-libs php-fpm php-gd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#php-fpm php-gd是需要的两个php模块&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>2.配置数据库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql_install_db --user&lt;span class="o">=&lt;/span>mysql --basedir&lt;span class="o">=&lt;/span>/usr --datadir&lt;span class="o">=&lt;/span>/var/lib/mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#需要以root权限运行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl start mariadb &lt;span class="c1">#开启数据库服务端&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> mariadb &lt;span class="c1">#设置开机启动&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql_secure_installation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#设置安全组策略第一个是询问MariaDB的root密码，没有设置密码就可以直接按Enter键，再设置一个root密码。之后，第一个问答输入y他会删除test数据库，第二个问答是是否删除anonymous用户以及最后一个禁用用root用户远程登录。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>3.启用nginx&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl start nginx#启用
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> nginx#设置开机启动
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>  之后浏览器打开网址http://server-ip:80/查看，会看到nginx的欢迎界面&lt;/p>
&lt;p>  如果绑定域名用于名访问提示服务器不存在很正常，因为你还没有正确的配置nginx&lt;/p>
&lt;p>4.接下来进入进阶型配置，而非默认配置。&lt;/p>
&lt;p>4.1首先关掉nginx服务&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl stop nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>4.2然后进入到nginx配置文件目录&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /etc/nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>4.3备份配置及文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mv nginx.conf nginx.conf.bak
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>4.4新建配置文件 /etc/nginx/nginx.conf并编辑内容如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">user http&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># May be equal to `grep processor /proc/cpuinfo | wc -l`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">worker_processes auto&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">worker_cpu_affinity auto&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># PCRE JIT can speed up processing of regular expressions significantly.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pcre_jit on&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">events &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># Should be equal to `ulimit -n`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    worker_connections 1024&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># Let each process accept multiple connections.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    multi_accept on&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># Preferred connection method for newer linux versions.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    use epoll&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    server_tokens off&lt;span class="p">;&lt;/span> &lt;span class="c1"># Disables the “Server” response header&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    charset utf-8&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># Sendfile copies data between one FD and other from within the kernel.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># More efficient than read() + write(), since the requires transferring&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># data to and from the user space.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    sendfile on&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># Tcp_nopush causes nginx to attempt to send its HTTP response head in one&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># packet, instead of using partial frames. This is useful for prepending&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># headers before calling sendfile, or for throughput optimization.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    tcp_nopush on&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># Don&amp;#39;t buffer data-sends (disable Nagle algorithm). Good for sending&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># frequent small bursts of data in real time.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    tcp_nodelay on&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># On Linux, AIO can be used starting from kernel version 2.6.22.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># It is necessary to enable directio, or otherwise reading will be blocking.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># aio threads;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># aio_write on;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># directio 8m;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># Caches information about open FDs, freqently accessed files.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># open_file_cache max=200000 inactive=20s;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># open_file_cache_valid 60s;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># open_file_cache_min_uses 2;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># open_file_cache_errors on;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># http://nginx.org/en/docs/hash.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    types_hash_max_size 4096&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    include mime.types&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    default_type application/octet-stream&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># Logging Settings&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    access_log off&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># Gzip Settings&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    gzip on&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    gzip_comp_level 6&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    gzip_min_length 500&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    gzip_proxied expired no-cache no-store private auth&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    gzip_vary on&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    gzip_disable &lt;span class="s2">&amp;#34;MSIE [1-6]\.&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    gzip_types
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        application/atom+xml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        application/javascript
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        application/json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        application/ld+json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        application/manifest+json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        application/rss+xml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        application/vnd.geo+json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        application/vnd.ms-fontobject
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        application/x-font-ttf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        application/x-web-app-manifest+json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        application/xhtml+xml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        application/xml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        font/opentype
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        image/bmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        image/svg+xml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        image/x-icon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        text/cache-manifest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        text/css
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        text/plain
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        text/vcard
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        text/vnd.rim.location.xloc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        text/vtt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        text/x-component
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        text/x-cross-domain-policy&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="c1"># index index.php index.html index.htm;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    include sites-enabled/*&lt;span class="p">;&lt;/span> &lt;span class="c1"># See Server blocks&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>4.5上面的配置文件并没有定义任何服务，所以即使启用也无法访问，接下来要使用多个配置文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /etc/nginx/sites-available#新建模块文件放的位置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir /etc/nginx/sites-enabled#模块文件启用的目录
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>4.6进入到模块文件夹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /etc/nginx/sites-available
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>4.7编辑/etc/nginx/sites-available/example文件创建一个示例代码块&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">server &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        listen 80&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        listen &lt;span class="o">[&lt;/span>::&lt;span class="o">]&lt;/span>:80&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        server_name server_url/name/ip&lt;span class="p">;&lt;/span>&lt;span class="c1">#可以是ip、域名、等等，本地调试请改为127.0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        root /usr/share/nginx/html&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        location / &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">           index index.php index.html index.htm&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>4.8启用代码块只需要简单的创建一个符号链接：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ln -s /etc/nginx/sites-available/example /etc/nginx/sites-enabled/example
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>  取消代码块&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">unlink /etc/nginx/sites-enabled/example
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>  添加代码块或者修改配置只需要重启nginx就可以了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl restart nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>5.配置php&lt;/p>
&lt;p>  修改php配置文件启用模块&lt;/p>
&lt;p>  编辑&lt;code>/etc/php/php.ini&lt;/code>文件：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">extension&lt;/span>&lt;span class="o">=&lt;/span>gd.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">extension&lt;/span>&lt;span class="o">=&lt;/span>pdo_mysql.so
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">extension&lt;/span>&lt;span class="o">=&lt;/span>mysqli.so
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>6.启用php-fpm&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl start php-fpm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> php-fpm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>7.在nginx配置模块里启用php&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">/etc/nginx/sites-available/php-test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    listen 8000&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    listen &lt;span class="o">[&lt;/span>::&lt;span class="o">]&lt;/span>:8000&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server_name server_url/name/ip&lt;span class="p">;&lt;/span>&lt;span class="c1">#可以是ip、域名、等等，本地调试请改为127.0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root /usr/share/nginx/html&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    location / &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        index test.php index.html index.htm&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    location ~ &lt;span class="o">[&lt;/span>^/&lt;span class="o">]&lt;/span>&lt;span class="se">\.&lt;/span>php&lt;span class="o">(&lt;/span>/&lt;span class="p">|&lt;/span>$&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        &lt;span class="c1"># Correctly handle request like /test.php/foo/blah.php or /test.php/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        fastcgi_split_path_info ^&lt;span class="o">(&lt;/span>.+?&lt;span class="se">\.&lt;/span>php&lt;span class="o">)(&lt;/span>/.*&lt;span class="o">)&lt;/span>$&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        try_files &lt;span class="nv">$uri&lt;/span> &lt;span class="nv">$document_root$fastcgi_script_name&lt;/span> &lt;span class="o">=&lt;/span>404&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        &lt;span class="c1"># Mitigate https://httpoxy.org/ vulnerabilities&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        fastcgi_param HTTP_PROXY &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        fastcgi_pass unix:/run/php-fpm/php-fpm.sock&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        fastcgi_index index.php&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        fastcgi_param SCRIPT_FILENAME &lt;span class="nv">$document_root$fastcgi_script_name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        include fastcgi_params&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>8.在/usr/share/nginx/html下新建test.php&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;?&lt;/span>&lt;span class="nx">php&lt;/span> &lt;span class="nx">phpinfo&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="cp">?&amp;gt;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>  之后link启用模块&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ln -s /etc/nginx/sites-available/php-test /etc/nginx/sites-enabled/php-test
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>  然后重启nginx&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl restart nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;font color=green>
&amp;emsp;&amp;emsp;浏览器地址栏访问，这个时候需要注意三点
&lt;p>    a.一共使用了两个web端口80和8000，两个一个是html的静态，另一个是可以使用php的动态，访问时需要区分&lt;/p>
&lt;p>    b.本地访问一般都可以，服务器访问需要开启端口阿里云的配置文档非常详细了，这里给个链接：&lt;a href="https://help.aliyun.com/document_detail/25471.html">&lt;a href="https://help.aliyun.com/document_detail/25471.html">https://help.aliyun.com/document_detail/25471.html&lt;/a>&lt;/a>&lt;/p>
&lt;p>    c.访问的时候注意代码模块test.php中代码index设定的为主页，指定第一加载php文件为test.php
&lt;/font>
  访问的两个地址：&lt;/p>
&lt;p>    a.&lt;a>http://server_name:80/&lt;/a> #指向静态加载，也是默认加载&lt;/p>
&lt;p>    b.&lt;a>http://server_name:8000/&lt;/a> #指向动态加载&lt;/p>
&lt;p>9.最后测试phpmyadmin搭建和测试&lt;/p>
&lt;p>9.1首先安装phpmyadmin&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S phpmyadmin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>9.2然后创建phpmyadmin 的nginx配置文件(基于php-test改就行了)&lt;/p>
&lt;p>  &lt;code>/etc/nginx/sites-available/phpmyadmin&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">server &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    listen 888&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    listen &lt;span class="o">[&lt;/span>::&lt;span class="o">]&lt;/span>:888&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server_name server_url/name/ip&lt;span class="p">;&lt;/span>&lt;span class="c1">#可以是ip、域名、等等，本地调试请改为127.0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root /srv/http/phpmyadmin&lt;span class="p">;&lt;/span>&lt;span class="c1">#修改web目录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    location / &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        index index.php index.html index.htm&lt;span class="p">;&lt;/span>&lt;span class="c1">#设置为index.php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    location ~ &lt;span class="o">[&lt;/span>^/&lt;span class="o">]&lt;/span>&lt;span class="se">\.&lt;/span>php&lt;span class="o">(&lt;/span>/&lt;span class="p">|&lt;/span>$&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        &lt;span class="c1"># Correctly handle request like /test.php/foo/blah.php or /test.php/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        fastcgi_split_path_info ^&lt;span class="o">(&lt;/span>.+?&lt;span class="se">\.&lt;/span>php&lt;span class="o">)(&lt;/span>/.*&lt;span class="o">)&lt;/span>$&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        try_files &lt;span class="nv">$uri&lt;/span> &lt;span class="nv">$document_root$fastcgi_script_name&lt;/span> &lt;span class="o">=&lt;/span>404&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        &lt;span class="c1"># Mitigate https://httpoxy.org/ vulnerabilities&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        fastcgi_param HTTP_PROXY &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        fastcgi_pass unix:/run/php-fpm/php-fpm.sock&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        fastcgi_index index.php&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        fastcgi_param SCRIPT_FILENAME &lt;span class="nv">$document_root$fastcgi_script_name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">        include fastcgi_params&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>9.3接下来设置web权限
9.3.1链接phpmyadmin到/srv/http&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ln -s /usr/share/webapps/phpMyAdmin /srv/http/phpmyadmin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>9.3.2使用安装脚本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /usr/share/webapps/phpMyAdmin/config &lt;span class="c1">#创建配置文件文件夹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown http:http /usr/share/webapps/phpMyAdmin/config &lt;span class="c1">#用户组使可以网页端访问&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">750&lt;/span> /usr/share/webapps/phpMyAdmin/config &lt;span class="c1">#修改权限保证安全&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>9.4输入网址http://server:888/访问
&lt;font color=green>&lt;/p>
&lt;p>BUG：&lt;/p>
&lt;p>  1.配置文件现在需要一个短语密码，修改配置文件,中间char必须是32个字符
&lt;code>
/etc/webapps/phpmyadmin/config.inc.php
&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$cfg&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="s1">&amp;#39;blowfish_secret&amp;#39;&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;char&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>  2.错误提示：安装时所用的 config 文件夹尚未删除。我们强烈建议您在完成 phpMyAdmin 安装后立即删除该文件夹。否则未经授权的用户都可以下载您的配置文件从而使服务器陷入危险。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">rm -rf /usr/share/webapps/phpMyAdmin/config &lt;span class="c1">#删除创建的配置文件文件夹&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/font>
&lt;p>到此基本lnmp的环境已经搭建完成了&lt;/p></content><category scheme="https://lengyefenghan.top/categories/archlinux/" term="Archlinux" label="Archlinux"/><category scheme="https://lengyefenghan.top/tags/archlinux/" term="archlinux" label="archlinux"/><category scheme="https://lengyefenghan.top/tags/%E9%98%BF%E9%87%8C%E4%BA%91/" term="阿里云" label="阿里云"/><category scheme="https://lengyefenghan.top/tags/lnmp/" term="LNMP" label="LNMP"/></entry><entry><title type="text">阿里云LNMP环境搭建（二）-配置archlinux</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2019-12-21-2/"/><id>https://lengyefenghan.top/blogs/2019-12-21-2/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2019-12-21T10:29:36+00:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">本文章具有一定时效性，最后更新时间为2019年12月20日星期五，并且会在结尾列出参……</summary><content type="html">&lt;p>&lt;font color=red>  本文章具有一定时效性，最后更新时间为2019年12月20日星期五，并且会在结尾列出参考文献资料，本篇仅为中篇，后续持续更新，记得关注。&lt;/font>&lt;/p>
&lt;p>1.首先要配置的是ssh&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S openssh#安装ssh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>1.1 编辑&lt;code>/etc/ssh/sshd_config&lt;/code>ssh服务器端配置文件，仅记录本人修改项目&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Port 22#ssh的端口，阿里云默认22端口且仅允许22端口使用ssh协议，修改后可能会出现问题
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PermitRootLogin yes#允许root用户登陆，一般建议更改为no并且另外添加用户
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>1.2 开启ssh服务端&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl start sshd#开启ssh服务端
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> sshd#若正常开启服务端，则使用这条命令设置为开机启动
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>1.3 然后通过ssh root@服务器端ip连接服务器&lt;/p>
&lt;p>  注意：为了服务器安全最好使用sshkey密钥链接,具体我会单独列出一篇文章&lt;/p>
&lt;p>2.很多时候由于需要拉取开源项目等等需要安装git&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>3.pacman基本命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -Syy &lt;span class="c1">#同步镜像源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -Syyu &lt;span class="c1">#同步镜像源并且更新所有软件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -Ss pkg_name#搜索本地镜像库中有没有软件pkg_name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">示例：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -Ss vim#搜索名字为vim的软件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">extra/vim 8.1.2268-2 &lt;span class="o">[&lt;/span>installed&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    Vi Improved, a highly configurable, improved version of the vi text editor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -S pkg_name &lt;span class="c1">#安装名字为pkg_name 的软件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">示例：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -S vim#安装vim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -Qs pkg_name#搜索本地安装的软件有没有软件pkg_name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">示例：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -Qs vim &lt;span class="c1">#查看本地是否有vim&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">local/vim 8.1.2268-2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    Vi Improved, a highly configurable, improved version of the vi text editor
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>4.pacman特殊设置和aur源&lt;/p>
&lt;p>&lt;font color=green>  archlinuxcn源是中国人自己整理的国内常用软件的整理，同时也包含了很多软件的整理，例如打包的wineqq、迅雷以及其他常用软件、无特殊需要服务器不建议使用&lt;/font>&lt;/p>
&lt;p>  4.1使用方法：在 /etc/pacman.conf 文件末尾添加以下两行：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>archlinuxcn&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Server&lt;/span> &lt;span class="o">=&lt;/span> https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/&lt;span class="nv">$arch&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>  4.2安装 archlinuxcn-keyring 包导入 GPG key。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -Sy archlinuxcn-keyring
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>  4.3该镜像源链接帮助：https://mirrors.tuna.tsinghua.edu.cn/help/archlinuxcn/&lt;/p>
&lt;p>&lt;font color=red>aur源是指社区提交未被正式列入官方源的和陈旧的软件包，无特殊需要服务器不建议使用&lt;/font>&lt;/p>
&lt;p>  4.4由于yaourt失去维护建议使用yay,并且强烈不建议服务器使用aur源
&lt;font color=red>官方源以不再收录yay，如需使用请看新文章 &lt;a href="https://lengyefenghan.top/posts/2020-01-20">新文章点我&lt;/a>&lt;/font>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S yay
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>  yay执行以下命令修改 aururl :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yay --aururl &lt;span class="s2">&amp;#34;https://aur.tuna.tsinghua.edu.cn&amp;#34;&lt;/span> --save
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其他配置需求可参考本人其他文章&lt;/p></content><category scheme="https://lengyefenghan.top/categories/archlinux/" term="Archlinux" label="Archlinux"/><category scheme="https://lengyefenghan.top/tags/archlinux/" term="archlinux" label="archlinux"/><category scheme="https://lengyefenghan.top/tags/%E9%98%BF%E9%87%8C%E4%BA%91/" term="阿里云" label="阿里云"/><category scheme="https://lengyefenghan.top/tags/lnmp/" term="LNMP" label="LNMP"/></entry><entry><title type="text">阿里云LNMP环境搭建（一）-在阿里云服务器安装archlinux</title><link rel="alternate" type="text/html" href="https://lengyefenghan.top/blogs/2019-12-21-1/"/><id>https://lengyefenghan.top/blogs/2019-12-21-1/</id><updated>2022-10-24T08:55:58+08:00</updated><published>2019-12-21T09:05:32+00:00</published><author><name>冷夜枫寒</name><uri>https://lengyefenghan.top/</uri><email>lengyefenghan@outlook.com</email></author><rights>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</rights><summary type="html">本文章具有一定时效性，最后更新时间为2019年12月19日星期四，并且会在结尾列出参……</summary><content type="html">&lt;p>&lt;font color=red >   本文章具有一定时效性，最后更新时间为2019年12月19日星期四，并且会在结尾列出参考文献资料，本篇仅为开篇，后续持续更新，记得关注。&lt;/font>&lt;/p>
&lt;p>&lt;font color=green >   LNMP环境是指Linux+nginx+mysql/mariadb+php的web服务器环境 &lt;/font>&lt;/p>
&lt;p>  文章采用arch发行版是因为本文作者使用arch发行版顺手，新手和常规用户还是建议使用ubuntu等常规发行版&lt;/p>
&lt;h1 id="简单叙述">简单叙述&lt;/h1>
&lt;p>  首先下载archlinux最新版本镜像并且放在根目录&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wget -o /archiso.iso https://mirrors.tuna.tsinghua.edu.cn/archlinux/iso/latest/archlinux-2019.12.01-x86_64.iso
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>  然后查看硬盘挂载位置&lt;/p>
&lt;p>  然后修改阿里云grub的引导文件&lt;/p>
&lt;p>  &lt;code>/boot/grub/grub.cfg&lt;/code>文件中在第一个menuentry前添加下面的内容&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> &lt;span class="nv">timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">30&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">menuentry &lt;span class="s2">&amp;#34;Archlinux Live (x86_64)&amp;#34;&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> insmod iso9660
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">set&lt;/span> &lt;span class="nv">isofile&lt;/span>&lt;span class="o">=&lt;/span>/archiso.iso
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> loopback lo0 &lt;span class="si">${&lt;/span>&lt;span class="nv">isofile&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> linux &lt;span class="o">(&lt;/span>lo0&lt;span class="o">)&lt;/span>/arch/boot/x86_64/vmlinuz &lt;span class="nv">archisolabel&lt;/span>&lt;span class="o">=&lt;/span>ARCH_201912 &lt;span class="nv">img_dev&lt;/span>&lt;span class="o">=&lt;/span>/dev/vda1 &lt;span class="nv">img_loop&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">isofile&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="nv">earlymodules&lt;/span>&lt;span class="o">=&lt;/span>loop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#其中archisolabel=ARCH_下载镜像的年月&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#其中img_dev=原来系统下的硬盘分区挂载位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> initrd &lt;span class="o">(&lt;/span>lo0&lt;span class="o">)&lt;/span>/arch/boot/x86_64/archiso.img
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>  然后重启等待进入系统，由于阿里云是vnc界面建议直接根据arch官方wiki的方法安装，其中要注意的包括：&lt;/p>
&lt;p>  1.原系统镜像挂在位于/run/archiso/img_dev&lt;/p>
&lt;p>  2.挂载好后请手动删除archiso.iso以外的文件&lt;/p>
&lt;p>  挂载磁盘：&lt;/p>
&lt;p>  # XEN 平台把 /dev/vda1 替换为 /dev/xvda1&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -o rw,remount /dev/vda1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>  # 删除原有系统的文件，注意不要删除 archlinux-2016.04.01-dual.iso&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /run/archiso/img_dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf bin boot dev etc ...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>之后官方安装教程可参考（不适用于新手）：&lt;/p>
&lt;p>官方安装教程：https://wiki.archlinux.org/index.php/Installation_guide&lt;/p>
&lt;h1 id="本人安装记录">本人安装记录&lt;/h1>
&lt;p>1.挂载分区可读写&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount -o rw,remount /dev/vda1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>2.删除原有分区下多余文件，只留下原有硬盘下的archiso.iso不删除&lt;/p>
&lt;p>3.验证启动方式，我这里验证不支持efi引导&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ls /sys/firmware/efi/efivars
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>3.重新挂载硬盘到/mnt&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mount /dev/vda1 /mnt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>4.使用vim修改镜像源&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vim /etc/pacman.d/mirrorlist
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>5.然后使用vim命令搜索&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">:/tuna
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>6.之后查看镜像源为清华源后使用命令将其移动到第一行后&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">:m &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>7.然后保存退出（使用大写字母ZZ快速保存退出）&lt;/p>
&lt;p>8.之后使用命令安装系统&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacstrap /mnt base linux linux-firmware base-devel
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>9.生成fstab文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">genfstab -L /mnt &amp;gt;&amp;gt; /mnt/etc/fstab
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>#-L是针对MBR分区表的 -U是针对GPT分区表的&lt;/p>
&lt;p>10.chroot进入系统&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">arch-chroot /mnt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>11.配置系统&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">pacman -S grub#安装GRUB
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>12.编辑/etc/hostname填入主机名字&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;hostname&amp;#34;&lt;/span> &amp;gt; /etc/hostname
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>13.编辑/etc/hosts修改hosts文件&lt;/p>
&lt;p>14.安装GRUB到硬盘&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grub-install --target&lt;span class="o">=&lt;/span>i386-pc /dev/vda
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>15.生成配置文件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">grub-mkconfig -o /boot/grub/grub.cfg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>16.退出chroot环境&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>17.重启电脑&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">Reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>12.开机后进行下一步配置：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl start systemd-networkd#开启网络连接,若没有错误执行下一条命令
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> systemd-networkd#设置开机自动开启网络连接
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> ‘nameserver 223.5.5.5’ &amp;gt; /etc/rsolv.conf#设置dns 一般不需要设置 部分情况下设置了之后会导致网络无法访问
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>  安装基本到此结束，但是每次链接都需要从阿里云进入服务器控制台，后面会写如何开启配置ssh服务器来进行进一步配置&lt;/p>
&lt;p>参考资料：&lt;/p>
&lt;p>在 KVM/XEN 虚拟机上安装 Archlinux：&lt;/p>
&lt;p>&lt;a href="https://pxx.io/2016/04/04/kvm-xen-install-archlinux.html">https://pxx.io/2016/04/04/kvm-xen-install-archlinux.html&lt;/a>&lt;/p>
&lt;p>arch官网wiki:&lt;/p>
&lt;p>&lt;a href="https://wiki.archlinux.org/">https://wiki.archlinux.org/&lt;/a>&lt;/p></content><category scheme="https://lengyefenghan.top/categories/archlinux/" term="Archlinux" label="Archlinux"/><category scheme="https://lengyefenghan.top/tags/archlinux/" term="archlinux" label="archlinux"/><category scheme="https://lengyefenghan.top/tags/%E9%98%BF%E9%87%8C%E4%BA%91/" term="阿里云" label="阿里云"/><category scheme="https://lengyefenghan.top/tags/lnmp/" term="LNMP" label="LNMP"/></entry></feed>